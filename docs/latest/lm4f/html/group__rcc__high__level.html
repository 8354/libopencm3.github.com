<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>libopencm3: High-level clock control API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">libopencm3
   </div>
   <div id="projectbrief">A free/libre/open-source firmware library for various ARM Cortex-M3 microcontrollers.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>libopencm3</span></a></li>
      <li><a href="../../html/index.html"><span>Back&#160;to&#160;Top</span></a></li>
      <li><a href="../../cm3/html/modules.html"><span>CM3&#160;Core</span></a></li>
      <li><a href="../../stm32f1/html/modules.html"><span>STM32F1</span></a></li>
      <li><a href="../../stm32f2/html/modules.html"><span>STM32F2</span></a></li>
      <li><a href="../../stm32f4/html/modules.html"><span>STM32F4</span></a></li>
      <li><a href="../../stm32l1/html/modules.html"><span>STM32L1</span></a></li>
      <li><a href="../../lm3s/html/modules.html"><span>LM3S</span></a></li>
      <li><a href="modules.html"><span>LM4F</span></a></li>
      <li><a href="../../lpc13xx/html/modules.html"><span>LPC13</span></a></li>
      <li><a href="../../lpc17xx/html/modules.html"><span>LPC17</span></a></li>
      <li><a href="../../lpc43xx/html/modules.html"><span>LPC43</span></a></li>
      <li><a href="../../emf32g/html/modules.html"><span>EMF32&#160;Gecko</span></a></li>
      <li><a href="../../emf32gg/html/modules.html"><span>EMF32&#160;Giant&#160;Gecko</span></a></li>
      <li><a href="../../emf32lg/html/modules.html"><span>EMF32&#160;Leopard&#160;Gecko</span></a></li>
      <li><a href="../../emf32tg/html/modules.html"><span>EMF32&#160;Tiny&#160;Gecko</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__rcc__high__level.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">High-level clock control API</div>  </div>
<div class="ingroups"><a class="el" href="group__rcc__file.html">RCC</a></div></div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for High-level clock control API:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__rcc__high__level.png" border="0" alt="" usemap="#group____rcc____high____level"/>
<map name="group____rcc____high____level" id="group____rcc____high____level">
</map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga8a17e04e6b457ec201d76ba1ee418a9d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rcc__high__level.html#ga8a17e04e6b457ec201d76ba1ee418a9d">rcc_change_pll_divisor</a> (<a class="elRef" doxygen="cm3.tag:../../cm3/html/" href="../../cm3/html/common_8h.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a> pll_div400)</td></tr>
<tr class="memdesc:ga8a17e04e6b457ec201d76ba1ee418a9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change the PLL divisor.  <a href="#ga8a17e04e6b457ec201d76ba1ee418a9d"></a><br/></td></tr>
<tr class="memitem:gaebfa606dfc58689248800e62bceb2f93"><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="cm3.tag:../../cm3/html/" href="../../cm3/html/common_8h.html#afaa62991928fb9fb18ff0db62a040aba">u32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rcc__high__level.html#gaebfa606dfc58689248800e62bceb2f93">rcc_get_system_clock_frequency</a> (void)</td></tr>
<tr class="memdesc:gaebfa606dfc58689248800e62bceb2f93"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the system clock frequency.  <a href="#gaebfa606dfc58689248800e62bceb2f93"></a><br/></td></tr>
<tr class="memitem:gaf2fc6f12a382f0e34221330ee37fe0ff"><td class="memItemLeft" align="right" valign="top">static <a class="elRef" doxygen="cm3.tag:../../cm3/html/" href="../../cm3/html/common_8h.html#afaa62991928fb9fb18ff0db62a040aba">u32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rcc__high__level.html#gaf2fc6f12a382f0e34221330ee37fe0ff">xtal_to_freq</a> (<a class="el" href="group__rcc__defines.html#ga8f09204cad649f070887682ed6549ea9">xtal_t</a> xtal)</td></tr>
<tr class="memitem:ga893dc6461e9af854fb562c0e97df6a5b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rcc__high__level.html#ga893dc6461e9af854fb562c0e97df6a5b">rcc_sysclk_config</a> (<a class="el" href="group__rcc__defines.html#ga931f75a5969f2dda1abaa7ee1b2fb022">osc_src_t</a> osc_src, <a class="el" href="group__rcc__defines.html#ga8f09204cad649f070887682ed6549ea9">xtal_t</a> xtal, <a class="elRef" doxygen="cm3.tag:../../cm3/html/" href="../../cm3/html/common_8h.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a> pll_div400)</td></tr>
<tr class="memdesc:ga893dc6461e9af854fb562c0e97df6a5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure the system clock source.  <a href="#ga893dc6461e9af854fb562c0e97df6a5b"></a><br/></td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<h2>Function Documentation</h2>
<a class="anchor" id="ga8a17e04e6b457ec201d76ba1ee418a9d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rcc_change_pll_divisor </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" doxygen="cm3.tag:../../cm3/html/" href="../../cm3/html/common_8h.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a>&#160;</td>
          <td class="paramname"><em>pll_div400</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Change the PLL divisor. </p>
<p>Changes the divisor applied to the 400MHz PLL clock. The PLL must have previously been configured by selecting an appropriate XTAL value, and turning on the PLL. This function does not reconfigure the XTAL value or oscillator source. It only changes the PLL divisor.</p>
<p>The PLL is bypassed before modifying the divisor, and the function blocks until the PLL is locked, then the bypass is disabled, before returning.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pll_div400</td><td>The clock divisor to apply to the 400MHz PLL clock. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="rcc_8c_source.html#l00359">359</a> of file <a class="el" href="rcc_8c_source.html">rcc.c</a>.</p>

<p>References <a class="el" href="rcc_8c_source.html#l00102">lm4f_rcc_sysclk_freq</a>, <a class="el" href="rcc_8c_source.html#l00231">rcc_pll_bypass_disable()</a>, <a class="el" href="rcc_8c_source.html#l00245">rcc_pll_bypass_enable()</a>, <a class="el" href="rcc_8c_source.html#l00269">rcc_set_pll_divisor()</a>, and <a class="el" href="rcc_8c_source.html#l00332">rcc_wait_for_pll_ready()</a>.</p>

<p>Referenced by <a class="el" href="rcc_8c_source.html#l00438">rcc_sysclk_config()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__rcc__high__level_ga8a17e04e6b457ec201d76ba1ee418a9d_cgraph.png" border="0" usemap="#group__rcc__high__level_ga8a17e04e6b457ec201d76ba1ee418a9d_cgraph" alt=""/></div>
<map name="group__rcc__high__level_ga8a17e04e6b457ec201d76ba1ee418a9d_cgraph" id="group__rcc__high__level_ga8a17e04e6b457ec201d76ba1ee418a9d_cgraph">
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__rcc__high__level_ga8a17e04e6b457ec201d76ba1ee418a9d_icgraph.png" border="0" usemap="#group__rcc__high__level_ga8a17e04e6b457ec201d76ba1ee418a9d_icgraph" alt=""/></div>
<map name="group__rcc__high__level_ga8a17e04e6b457ec201d76ba1ee418a9d_icgraph" id="group__rcc__high__level_ga8a17e04e6b457ec201d76ba1ee418a9d_icgraph">
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gaebfa606dfc58689248800e62bceb2f93"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="cm3.tag:../../cm3/html/" href="../../cm3/html/common_8h.html#afaa62991928fb9fb18ff0db62a040aba">u32</a> rcc_get_system_clock_frequency </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the system clock frequency. </p>
<dl class="section return"><dt>Returns</dt><dd>System clock frequency in Hz </dd></dl>

<p>Definition at line <a class="el" href="rcc_8c_source.html#l00378">378</a> of file <a class="el" href="rcc_8c_source.html">rcc.c</a>.</p>

<p>References <a class="el" href="rcc_8c_source.html#l00102">lm4f_rcc_sysclk_freq</a>.</p>

</div>
</div>
<a class="anchor" id="ga893dc6461e9af854fb562c0e97df6a5b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rcc_sysclk_config </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__rcc__defines.html#ga931f75a5969f2dda1abaa7ee1b2fb022">osc_src_t</a>&#160;</td>
          <td class="paramname"><em>osc_src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__rcc__defines.html#ga8f09204cad649f070887682ed6549ea9">xtal_t</a>&#160;</td>
          <td class="paramname"><em>xtal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="cm3.tag:../../cm3/html/" href="../../cm3/html/common_8h.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a>&#160;</td>
          <td class="paramname"><em>pll_div400</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure the system clock source. </p>
<p>Sets up the system clock, including configuring the oscillator source, and PLL to acheve the desired system clock frequency. Where applicable, The LM4F clock API uses the new RCC2 register to configure clock parameters.</p>
<p>Enables the main oscillator if the clock source is OSCSRC_MOSC. If the main oscillator was previously enabled, it will not be disabled. If desired, it can be separately disabled by a call to <a class="el" href="group__rcc__low__level.html#ga5f536734177d63215d1494e6dea715d0" title="Disable the main oscillator.">rcc_disable_main_osc()</a>.</p>
<p>Configures the system clock to run from the 400MHz PLL with a divisor of pll_div400 applied. If pll_div400 is 0, then the PLL is disabled, and the system clock is configured to run off a "raw" clock. If the PLL was previously powered on, it will not be disabled. If desired, it can de powered off by a call to <a class="el" href="group__rcc__low__level.html#ga31217830e7f538e902e8b157e2715428" title="Power down the main PLL.">rcc_pll_off()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">osc_src</td><td>Oscillator from where to derive the system clock. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">xtal</td><td>Type of crystal connected to the OSCO/OSCI pins </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pll_div400</td><td>The clock divisor to apply to the 400MHz PLL clock. If 0, then the PLL is disabled, and the system runs off a "raw" clock.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>System clock frequency in Hz </dd></dl>

<p>Definition at line <a class="el" href="rcc_8c_source.html#l00438">438</a> of file <a class="el" href="rcc_8c_source.html">rcc.c</a>.</p>

<p>References <a class="el" href="rcc_8c_source.html#l00102">lm4f_rcc_sysclk_freq</a>, <a class="el" href="rcc_8h_source.html#l00043">OSCSRC_30K_INT</a>, <a class="el" href="rcc_8h_source.html#l00044">OSCSRC_32K_EXT</a>, <a class="el" href="rcc_8h_source.html#l00040">OSCSRC_MOSC</a>, <a class="el" href="rcc_8h_source.html#l00041">OSCSRC_PIOSC</a>, <a class="el" href="rcc_8h_source.html#l00042">OSCSRC_PIOSC_D4</a>, <a class="el" href="rcc_8c_source.html#l00359">rcc_change_pll_divisor()</a>, <a class="el" href="rcc_8c_source.html#l00115">rcc_configure_xtal()</a>, <a class="el" href="rcc_8c_source.html#l00150">rcc_enable_main_osc()</a>, <a class="el" href="rcc_8c_source.html#l00173">rcc_enable_rcc2()</a>, <a class="el" href="rcc_8c_source.html#l00245">rcc_pll_bypass_enable()</a>, <a class="el" href="rcc_8c_source.html#l00199">rcc_pll_on()</a>, <a class="el" href="rcc_8c_source.html#l00212">rcc_set_osc_source()</a>, and <a class="el" href="rcc_8c_source.html#l00384">xtal_to_freq()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__rcc__high__level_ga893dc6461e9af854fb562c0e97df6a5b_cgraph.png" border="0" usemap="#group__rcc__high__level_ga893dc6461e9af854fb562c0e97df6a5b_cgraph" alt=""/></div>
<map name="group__rcc__high__level_ga893dc6461e9af854fb562c0e97df6a5b_cgraph" id="group__rcc__high__level_ga893dc6461e9af854fb562c0e97df6a5b_cgraph">
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gaf2fc6f12a382f0e34221330ee37fe0ff"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="elRef" doxygen="cm3.tag:../../cm3/html/" href="../../cm3/html/common_8h.html#afaa62991928fb9fb18ff0db62a040aba">u32</a> xtal_to_freq </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__rcc__defines.html#ga8f09204cad649f070887682ed6549ea9">xtal_t</a>&#160;</td>
          <td class="paramname"><em>xtal</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="rcc_8c_source.html#l00384">384</a> of file <a class="el" href="rcc_8c_source.html">rcc.c</a>.</p>

<p>References <a class="el" href="rcc_8h_source.html#l00071">XTAL_4M</a>.</p>

<p>Referenced by <a class="el" href="rcc_8c_source.html#l00438">rcc_sysclk_config()</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__rcc__high__level_gaf2fc6f12a382f0e34221330ee37fe0ff_icgraph.png" border="0" usemap="#group__rcc__high__level_gaf2fc6f12a382f0e34221330ee37fe0ff_icgraph" alt=""/></div>
<map name="group__rcc__high__level_gaf2fc6f12a382f0e34221330ee37fe0ff_icgraph" id="group__rcc__high__level_gaf2fc6f12a382f0e34221330ee37fe0ff_icgraph">
</map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Mar 1 2013 19:21:25 for libopencm3 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.1.2 </li>
  </ul>
</div>
</body>
</html>
